<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ираклий К. ДЗ 5</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <div class="card col-md-8">
            <div class="card-body">
                <h5 class="card-title user-id"></h5>
                <p class="card-text comment"></p>
                <button class="btn btn-primary like">Like
                    <span class="badge badge-light"></span>
                </button>
                <!-- <button class="btn" id="delete">Delete</button> -->
            </div>
        </div>

        <form>
            <div class="form-group">
                <label for="comment-text">Введите комментарий</label>
                <textarea class="form-control" id="comment-text" rows="3"></textarea>
                <button class="btn btn-primary" id="send">Отправить</button>
            </div>
        </form>
    </div>
    <script>
        let commentId = '';

        const commentCardWrapper = document.querySelector('.card');
        const commentCard = document.querySelector('.card-body');
        let coomentList = [];

        const htpp = function () {
            const BASE_URL = 'http://89.108.65.123:8080';

            this.methods = {
                GET: 'GET',
                POST: 'POST',
                DELETE: 'DELETE',
            }

            this.request = async function (url = '/', method = 'GET', body) {
                const options = body ? {
                    method,
                    body: JSON.stringify(body),
                } : {
                    method
                }

                try {
                    return await fetch(`${BASE_URL}${url}`, options).then(function (res) {
                        return res.json()
                    }).catch(function (err) {
                        console.log(err);
                    })
                } catch (e) {
                    return false;
                }
            }
        }

        const $service = new htpp();

        const getComments = async function (comment) {
            if (comment) return await $service.request(`/comments?comment_id=${comment}`, $service.methods.GET)
            return await $service.request('/comments', $service.methods.GET)
        }

        const addComment = async function (commentId, commentText, likes) {
            await $service.request(`/comments?text=${commentId}&text=${commentText}&likes=${likes}`,
                $http.methods
                .POST)
        }

        const init = async function () {
            const user = await getUser();

            userId = user.comment_id
        }

        const createList = function (items) {
            commentText.innerHTML = '';
            commentId.innerHTML = userId;
        }
    </script>
</body>

</html>